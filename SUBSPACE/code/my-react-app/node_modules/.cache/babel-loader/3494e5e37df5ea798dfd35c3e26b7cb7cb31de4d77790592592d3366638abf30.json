{"ast":null,"code":"export const renderProportionalView = ({\n  g,\n  subspaces,\n  ringVisibility,\n  maxRadius,\n  ringLabels,\n  pointsData,\n  getSectorColor,\n  renderPoints\n}) => {\n  const ringAngles = calculateProportionalAngles(pointsData);\n\n  // Validate ringAngles\n  if (!ringAngles || !Array.isArray(ringAngles) || ringAngles.length !== pointsData.length) {\n    console.error(\"Invalid ring angles, skipping render:\", ringAngles);\n    return;\n  }\n  subspaces.forEach((key, index) => {\n    if (!ringVisibility[key]) return;\n    const innerRadius = index / subspaces.length * maxRadius;\n    const outerRadius = (index + 1) / subspaces.length * maxRadius;\n    let currentAngle = Math.PI / 2; // Consistent starting point\n\n    const angles = ringAngles[index] || [];\n    if (!Array.isArray(angles) || angles.length === 0) {\n      console.warn(`No valid angles for ring ${index}, skipping rendering`);\n      return;\n    }\n\n    // Render sectors\n    angles.forEach((angle, i) => {\n      const startAngle = currentAngle;\n      const endAngle = currentAngle + angle;\n      g.append(\"path\").attr(\"d\", d3.arc().innerRadius(innerRadius).outerRadius(outerRadius).startAngle(startAngle).endAngle(endAngle)).attr(\"fill\", getSectorColor(index, i)).attr(\"fill-opacity\", 0.3).attr(\"stroke\", \"black\").attr(\"stroke-width\", 0.5).style(\"cursor\", \"pointer\");\n      currentAngle = endAngle;\n    });\n\n    // Add ring label\n    g.append(\"text\").attr(\"x\", 0).attr(\"y\", -outerRadius - 5).attr(\"text-anchor\", \"middle\").attr(\"font-size\", \"16px\").attr(\"fill\", \"red\").attr(\"font-weight\", \"bold\").text(ringLabels[index] || \"\");\n\n    // Render points\n    if (typeof renderPoints === \"function\") {\n      renderPoints(index, innerRadius, outerRadius, angles);\n    } else {\n      console.warn(\"renderPoints is not a function, skipping point rendering\");\n    }\n  });\n};","map":{"version":3,"names":["renderProportionalView","g","subspaces","ringVisibility","maxRadius","ringLabels","pointsData","getSectorColor","renderPoints","ringAngles","calculateProportionalAngles","Array","isArray","length","console","error","forEach","key","index","innerRadius","outerRadius","currentAngle","Math","PI","angles","warn","angle","i","startAngle","endAngle","append","attr","d3","arc","style","text"],"sources":["/home/bipasha/Desktop/research/Data_Viz_Beads/Subspace/code/my-react-app/src/ProportionalView.js"],"sourcesContent":["export const renderProportionalView = ({\n    g,\n    subspaces,\n    ringVisibility,\n    maxRadius,\n    ringLabels,\n    pointsData,\n    getSectorColor,\n    renderPoints,\n}) => {\n    const ringAngles = calculateProportionalAngles(pointsData);\n\n    // Validate ringAngles\n    if (!ringAngles || !Array.isArray(ringAngles) || ringAngles.length !== pointsData.length) {\n        console.error(\"Invalid ring angles, skipping render:\", ringAngles);\n        return;\n    }\n\n    subspaces.forEach((key, index) => {\n        if (!ringVisibility[key]) return;\n\n        const innerRadius = (index / subspaces.length) * maxRadius;\n        const outerRadius = ((index + 1) / subspaces.length) * maxRadius;\n        let currentAngle = Math.PI / 2; // Consistent starting point\n\n        const angles = ringAngles[index] || [];\n        if (!Array.isArray(angles) || angles.length === 0) {\n            console.warn(`No valid angles for ring ${index}, skipping rendering`);\n            return;\n        }\n\n        // Render sectors\n        angles.forEach((angle, i) => {\n            const startAngle = currentAngle;\n            const endAngle = currentAngle + angle;\n\n            g.append(\"path\")\n                .attr(\"d\", d3.arc()\n                    .innerRadius(innerRadius)\n                    .outerRadius(outerRadius)\n                    .startAngle(startAngle)\n                    .endAngle(endAngle)\n                )\n                .attr(\"fill\", getSectorColor(index, i))\n                .attr(\"fill-opacity\", 0.3)\n                .attr(\"stroke\", \"black\")\n                .attr(\"stroke-width\", 0.5)\n                .style(\"cursor\", \"pointer\");\n\n            currentAngle = endAngle;\n        });\n\n        // Add ring label\n        g.append(\"text\")\n            .attr(\"x\", 0)\n            .attr(\"y\", -outerRadius - 5)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"font-size\", \"16px\")\n            .attr(\"fill\", \"red\")\n            .attr(\"font-weight\", \"bold\")\n            .text(ringLabels[index] || \"\");\n\n        // Render points\n        if (typeof renderPoints === \"function\") {\n            renderPoints(index, innerRadius, outerRadius, angles);\n        } else {\n            console.warn(\"renderPoints is not a function, skipping point rendering\");\n        }\n    });\n};"],"mappings":"AAAA,OAAO,MAAMA,sBAAsB,GAAGA,CAAC;EACnCC,CAAC;EACDC,SAAS;EACTC,cAAc;EACdC,SAAS;EACTC,UAAU;EACVC,UAAU;EACVC,cAAc;EACdC;AACJ,CAAC,KAAK;EACF,MAAMC,UAAU,GAAGC,2BAA2B,CAACJ,UAAU,CAAC;;EAE1D;EACA,IAAI,CAACG,UAAU,IAAI,CAACE,KAAK,CAACC,OAAO,CAACH,UAAU,CAAC,IAAIA,UAAU,CAACI,MAAM,KAAKP,UAAU,CAACO,MAAM,EAAE;IACtFC,OAAO,CAACC,KAAK,CAAC,uCAAuC,EAAEN,UAAU,CAAC;IAClE;EACJ;EAEAP,SAAS,CAACc,OAAO,CAAC,CAACC,GAAG,EAAEC,KAAK,KAAK;IAC9B,IAAI,CAACf,cAAc,CAACc,GAAG,CAAC,EAAE;IAE1B,MAAME,WAAW,GAAID,KAAK,GAAGhB,SAAS,CAACW,MAAM,GAAIT,SAAS;IAC1D,MAAMgB,WAAW,GAAI,CAACF,KAAK,GAAG,CAAC,IAAIhB,SAAS,CAACW,MAAM,GAAIT,SAAS;IAChE,IAAIiB,YAAY,GAAGC,IAAI,CAACC,EAAE,GAAG,CAAC,CAAC,CAAC;;IAEhC,MAAMC,MAAM,GAAGf,UAAU,CAACS,KAAK,CAAC,IAAI,EAAE;IACtC,IAAI,CAACP,KAAK,CAACC,OAAO,CAACY,MAAM,CAAC,IAAIA,MAAM,CAACX,MAAM,KAAK,CAAC,EAAE;MAC/CC,OAAO,CAACW,IAAI,CAAC,4BAA4BP,KAAK,sBAAsB,CAAC;MACrE;IACJ;;IAEA;IACAM,MAAM,CAACR,OAAO,CAAC,CAACU,KAAK,EAAEC,CAAC,KAAK;MACzB,MAAMC,UAAU,GAAGP,YAAY;MAC/B,MAAMQ,QAAQ,GAAGR,YAAY,GAAGK,KAAK;MAErCzB,CAAC,CAAC6B,MAAM,CAAC,MAAM,CAAC,CACXC,IAAI,CAAC,GAAG,EAAEC,EAAE,CAACC,GAAG,CAAC,CAAC,CACdd,WAAW,CAACA,WAAW,CAAC,CACxBC,WAAW,CAACA,WAAW,CAAC,CACxBQ,UAAU,CAACA,UAAU,CAAC,CACtBC,QAAQ,CAACA,QAAQ,CACtB,CAAC,CACAE,IAAI,CAAC,MAAM,EAAExB,cAAc,CAACW,KAAK,EAAES,CAAC,CAAC,CAAC,CACtCI,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC,CACzBA,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CACvBA,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC,CACzBG,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC;MAE/Bb,YAAY,GAAGQ,QAAQ;IAC3B,CAAC,CAAC;;IAEF;IACA5B,CAAC,CAAC6B,MAAM,CAAC,MAAM,CAAC,CACXC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,GAAG,EAAE,CAACX,WAAW,GAAG,CAAC,CAAC,CAC3BW,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BA,IAAI,CAAC,WAAW,EAAE,MAAM,CAAC,CACzBA,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CACnBA,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAC3BI,IAAI,CAAC9B,UAAU,CAACa,KAAK,CAAC,IAAI,EAAE,CAAC;;IAElC;IACA,IAAI,OAAOV,YAAY,KAAK,UAAU,EAAE;MACpCA,YAAY,CAACU,KAAK,EAAEC,WAAW,EAAEC,WAAW,EAAEI,MAAM,CAAC;IACzD,CAAC,MAAM;MACHV,OAAO,CAACW,IAAI,CAAC,0DAA0D,CAAC;IAC5E;EACJ,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}